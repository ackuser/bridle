(function(){var e=window.Bridle||{};typeof window.define=="function"&&window.define.amd&&window.define("Bridle",["jquery","d3"],function(){return e});var e=window.Bridle||{};e.LegendBox=function(){function d(r){r.each(function(r){p=r.length;var i=d3.select(this).selectAll("svg").data([r]),s=i.enter().append("svg").attr("class","bridle").append("g");s.append("g").attr("class","legend"),i.attr("width",n).attr("height",t);var u=i.select("g").attr("transform","translate("+e.left+","+e.top+")"),f=u.select(".legend").selectAll(".legendItem").data(function(e){return e}),d=f.enter().append("g").attr("class","legendItem").on("click",function(e,t){h.legendClick(e,t),f.classed("disabled",function(e){return e.disabled})}).on("mouseover",function(e,t){h.legendMouseover(e,t)}).on("mouseout",function(e,t){h.legendMouseout(e,t)});d.append("circle").attr("class","circle").attr("cx",0).attr("cy",function(e,t){return"-0.25em"}).attr("r","0.4em").attr("stroke-width",1).attr("stroke",function(e,t){return o(t)}).attr("fill",function(e,t){return o(t)}),d.append("text").attr("class","text").attr("x",l).text(function(e){return c(e)}),f.classed("disabled",function(e){return e.disabled}),f.exit().remove();var v=5,m=0,g=5,y=0;f.attr("opacity",0).attr("transform",function(n,r){var i=d3.select(this).select("text").node().getComputedTextLength()+28;return i>y&&(y=i),v+=m,v>t-e.top-e.bottom&&(v=5,g+=y),m=20,"translate("+g+","+v+")"}).transition().duration(a).attr("opacity",1)})}var e={top:5,bottom:5,left:5,right:5},t=200,n=200,r="stack",i="zero",s="default",o=d3.scale.category10(),u="Chart Title",a=1e3,f=20,l="1em",c=function(e){return e.name},h=d3.dispatch("legendClick","legendMouseover","legendMouseout"),p;return d.dispatch=h,d.margin=function(t){return arguments.length?(e=t,d):e},d.width=function(e){return arguments.length?(n=e,d):n},d.height=function(e){return arguments.length?(t=e,d):t},d.value=function(e){return arguments.length?(value=e,d):value},d.label=function(e){return arguments.length?(label=e,d):label},d.title=function(e){return arguments.length?(u=e,d):u},d.duration=function(e){return arguments.length?(a=e,d):a},d.colors=function(e){return arguments.length?(o=e,d):o},d.nameAccessor=function(e){return arguments.length?(c=e,d):c},d.numData=function(e){return arguments.length?(p=e,d):p},d};var e=window.Bridle||{};e.BarChart=function(){function S(e){return new Date(e)}function C(e){e.each(function(w){function U(){console.log("mode change"),this.value==="grouped"?(t="grouped",l.domain([0,k]),z()):(t="stacked",l.domain([0,L]),W())}function z(){j.select(".y.axis").transition().duration(v).attr("transform","translate(-25,0)").call(h),j.selectAll("g.layerrects").selectAll("rect").transition().duration(500).delay(function(e,t){return t*10}).attr("x",function(e,t,n){return g(s(e))+g.rangeBand()/A*n}).attr("width",g.rangeBand()/A).transition().attr("y",function(e){return l(e.y)}).attr("height",function(e){return r-l(e.y)-n.top-n.bottom})}function W(){j.select(".y.axis").transition().duration(v).attr("transform","translate(-25,0)").call(h),j.selectAll("g.layerrects").selectAll("rect").transition().duration(500).delay(function(e,t){return t*10}).attr("y",function(e){return l(e.y0+e.y)}).attr("height",function(e){return l(e.y0)-l(e.y0+e.y)}).transition().attr("x",function(e){return g(s(e))}).attr("width",g.rangeBand())}var E=this,S=w.filter(function(e){return!e.disabled});S.forEach(function(e){e.values.sort(x)}),S=d3.layout.stack().offset(a).order(f).values(function(e){return e.values}).x(s).y(o)(S),g.domain(S[0].values.map(function(e){return s(e)})).rangeRoundBands([0,i-n.left-n.right],.1);var T=function(){var e=0;return S.forEach(function(t){e+=t.values.length}),e/S.length};y.tickFormat(b).tickValues(g.domain().filter(function(e,t){var n=Math.ceil(200/(i/T()));return!(t%n)}));var k=d3.max(S,function(e){return d3.max(e.values,function(e){return e.y})}),L=d3.max(S,function(e){return d3.max(e.values,function(e){return e.y0+e.y})}),A=S.length,O=d3.max(S,function(e){return e.values.length});l.range([r-n.top-n.bottom,0]),t==="stacked"?l.domain([0,L]):l.domain([0,k]);var M=function(e,n,r){return t==="stacked"?g(s(e)):g(s(e))+g.rangeBand()/A*r},_=function(e){return t==="stacked"?l(e.y0+e.y):l(e.y)},D=function(e){return t==="stacked"?l(e.y0)-l(e.y0+e.y):r-l(e.y)-n.top-n.bottom},P=function(){return t==="stacked"?g.rangeBand():g.rangeBand()/A},H=d3.select(E).selectAll("svg").data([S]),B=H.enter().append("svg").attr("class","bridle").append("g");B.append("g").attr("class","rects"),B.append("g").attr("class","x axis"),B.append("g").attr("class","y axis").append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".72em").attr("class","y axis label").attr("text-anchor","middle"),B.append("svg:text").attr("class","chartTitle label").attr("text-anchor","middle").attr("dy","1em").attr("transform","translate("+(i-n.left-n.right+20)/2+","+ -n.top+")"),B.append("g").attr("class","legend").attr("transform","translate("+(i-n.left-n.right+20)+","+0+")").style("font-size","12px"),H.attr("width",i).attr("height",r);var j=H.select("g").attr("transform","translate("+n.left+","+n.top+")"),F=j.select(".rects").selectAll("g.layerrects").data(function(e){return e},function(e){return u(e)}).classed("hover",function(e){return e.hover});F.exit().transition().duration(v).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();var I=F.enter(),q=I.append("g").attr("class","layerrects").attr("fill",function(e,t){return c(u(e))}).selectAll("g.rect").data(function(e){return e.values.forEach(function(t){t.name=u(e)}),e.values});q.exit().transition().duration(v).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();var R=q.enter().append("g").attr("class","rect");R.append("rect").attr("opacity",.1).attr("x",function(e,t,n){return M(e,t,n)}).attr("y",function(e){return r-n.top-n.bottom}).attr("width",function(){return P()}).attr("height",0).on("mouseover",function(e,t,n){N.pointMouseover({x:s(e),y:o(e),series:e.name,pos:[g(s(e)),_(e)],pointIndex:t,seriesIndex:n})}).on("mouseout",function(e){N.pointMouseout({})}),j.selectAll("g.layerrects").selectAll("g.rect").select("rect").transition().duration(v).attr("opacity",.9).attr("y",function(e){return _(e)}).attr("height",function(e){return D(e)}).attr("width",function(){return P()}).attr("x",function(e,t,n){return M(e,t,n)}),j.select("text.chartTitle").text(p),j.select(".x.axis").attr("transform","translate(0,"+l.range()[0]+")").call(y),j.select(".y.axis").transition().duration(v).attr("transform","translate(-25,0)").call(h),j.select(".y.axis.label").attr("y",-45).attr("x",(-r+n.top+n.bottom)/2).attr("dy",".1em").text(d),d3.selectAll("input").on("change",U),m.numData()!=w.length&&j.select(".legend").datum(S).call(m),m.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,S.filter(function(e){return!e.disabled}).length||S.forEach(function(e){e.disabled=!1}),e.call(C)}),m.dispatch.on("legendMouseover",function(t,n){t.hover=!0,e.call(C)}),m.dispatch.on("legendMouseout",function(t,n){t.hover=!1,e.call(C)}),N.on("pointMouseover.tooltip",function(e){var t=$(E).offset(),r=e.pos[0]+t.left+n.left,i=e.pos[1]+t.top+n.top,s=d3.time.format("%Y-%m-%d");formatterY=d3.format(".02f");var o="<h3>"+e.series+"</h3>"+"<p>"+'<span class="value">['+s(e.x)+", "+formatterY(e.y)+"]</span>"+"</p>";nvtooltip.show([r,i],o)}),N.on("pointMouseout.tooltip",function(e){nvtooltip.cleanup()})})}var t="stacked",n={top:50,bottom:100,left:100,right:100},r=400,i=1e3,s=function(e){return e.x},o=function(e){return e.y},u=function(e){return e.name},a="zero",f="default",l=d3.scale.linear(),c=d3.scale.category10(),h=d3.svg.axis().scale(l).orient("left"),p="Chart Title",d="Axis Title",v=1e3,m=e.LegendBox().nameAccessor(u),g=d3.scale.ordinal(),y=d3.svg.axis().scale(g).tickSize(5).orient("bottom"),b=d3.time.format("%Y-%m-%d"),w=10,E=10,x=function(e,t){return S(s(e))>S(s(t))?1:-1},T=function(e,t){return S(s(t))<S(s(e))?1:-1},N=d3.dispatch("showTooltip","hideTooltip","pointMouseover","pointMouseout");return C.dispatch=N,C.margin=function(e){return arguments.length?(n=e,C):n},C.width=function(e){return arguments.length?(i=e,C):i},C.height=function(e){return arguments.length?(r=e,C):r},C.value=function(e){return arguments.length?(value=e,C):value},C.label=function(e){return arguments.length?(label=e,C):label},C.title=function(e){return arguments.length?(p=e,C):p},C.xAxis=function(e){return arguments.length?(y=e,C):y},C.yAxis=function(e){return arguments.length?(h=e,C):h},C.yAxisTitle=function(e){return arguments.length?(d=e,C):d},C.duration=function(e){return arguments.length?(v=e,C):v},C.tickFormat=function(e){return arguments.length?(b=e,C):b},C.legend=function(e){return arguments.length?(m=e,C):m},C.xValue=function(e){return arguments.length?(s=e,C):s},C.yValue=function(e){return arguments.length?(o=e,C):o},C.nameValue=function(e){return arguments.length?(u=e,C):u},C.colors=function(e){return arguments.length?(c=e,C):c},C.mode=function(e){return arguments.length?(t=e,C):t},C};var e=window.Bridle||{};e.LineChart=function(){function g(e){e.each(function(y){function T(e){return l(i(e))}function N(e){return c(s(e))}var b=this;data=y.filter(function(e){return!e.disabled});var w=data.map(function(e){return d3.max(e.values,function(e){return i(e)})}),E=data.map(function(e){return d3.min(e.values,function(e){return i(e)})});l.domain([d3.min(E),d3.max(w)]).range([0,r-t.left-t.right]);var S=data.map(function(e){return d3.max(e.values,function(e){return s(e)})});c.domain([0,d3.max(S)]).range([n-t.top-t.bottom,0]);var x=d3.svg.line().x(function(e,t){return l(i(e))}).y(function(e){return c(s(e))}),C=d3.select(this).selectAll("svg").data([data]),k=C.enter().append("svg").attr("class","bridle").append("g");k.append("g").attr("class","lines"),k.append("g").attr("class","points"),k.append("g").attr("class","x axis"),k.append("g").attr("class","y axis").append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".72em").attr("class","y axis label").attr("text-anchor","middle"),k.append("svg:text").attr("class","chartTitle label").attr("text-anchor","middle").attr("dy","1em").attr("transform","translate("+(r-t.left-t.right+20)/2+","+ -t.top+")"),k.append("g").attr("class","legend").attr("transform","translate("+(r-t.left-t.right+20)+","+0+")").style("font-size","12px"),C.attr("width",r).attr("height",n);var L=C.select("g").attr("transform","translate("+t.left+","+t.top+")"),A=L.select(".lines").selectAll(".line").data(function(e){return e},function(e){return o(e)}).classed("hover",function(e){return e.hover});A.exit().remove();var O=A.enter();O.append("path").attr("class","line").attr("d",function(e){return x(e.values)});var M=L.select(".points").selectAll("g.seriespoints").data(function(e){return e});M.exit().transition().duration(f).style("r",0).style("opacity",1e-6).remove();var _=M.enter(),D=_.append("g").attr("class","seriespoints").selectAll("g.circle").data(function(e){return e.values.forEach(function(t){t.name=o(e)}),e.values});M.selectAll("g.circle").data(function(e){return e.values.forEach(function(t){t.name=o(e)}),e.values});var P=D.enter().append("g").attr("class","circle");P.append("circle").attr("opacity",.1).attr("class","seriespoint").attr("r",0).attr("cx",function(e){return l(i(e))}).attr("cy",function(e){return c(s(e))}).on("mouseover",function(e,t,n){m.pointMouseover({x:i(e),y:s(e),series:e.name,pos:[l(i(e)),c(s(e))],pointIndex:t,seriesIndex:n})}).on("mouseout",function(e){m.pointMouseout({})}),L.selectAll("path.line").attr("stroke",function(e,t){return d(o(e))}).attr("fill","none").transition().duration(f).attr("d",function(e){return x(e.values)}).attr("stroke-width",1.5),L.selectAll("g.circle").select("circle").transition().duration(f).attr("r",5).attr("cx",function(e){return l(i(e))}).attr("cy",function(e){return c(s(e))}),L.select("text.chartTitle").text(u),L.select(".x.axis").attr("transform","translate(0,"+c.range()[0]+")").call(h),L.select(".y.axis").transition().duration(f).attr("transform","translate(-25,0)").call(p),L.select(".y.axis.label").attr("y",-45).attr("x",(-n+t.top+t.bottom)/2).attr("dy",".1em").text(a),v.numData()!=y.length&&L.select(".legend").datum(data).call(v),v.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,data.filter(function(e){return!e.disabled}).length||(console.log("what does this do?"),data.forEach(function(e){e.disabled=!1})),e.call(g)}),v.dispatch.on("legendMouseover",function(t,n){t.hover=!0,e.call(g)}),v.dispatch.on("legendMouseout",function(t,n){t.hover=!1,e.call(g)}),m.on("pointMouseover.tooltip",function(e){var n=$(b).offset(),r=e.pos[0]+n.left+t.left,i=e.pos[1]+n.top+t.top,s=d3.time.format("%Y-%m-%d");formatterY=d3.format(".02f");var o="<h3>"+e.series+"</h3>"+"<p>"+'<span class="value">['+s(e.x)+", "+formatterY(e.y)+"]</span>"+"</p>";nvtooltip.show([r,i],o)}),m.on("pointMouseout.tooltip",function(e){nvtooltip.cleanup()})})}function y(e){return l(e.x)}function b(e){return c(e.y0)}function w(e){return c(e.y0+e.y)}var t={top:50,bottom:30,left:100,right:100},n=400,r=1e3,i=function(e){return e.x},s=function(e){return e.y},o=function(e){return e.name},u="Chart Title",a="Axis Title",f=1e3,l=d3.time.scale.utc().nice(),c=d3.scale.linear().nice(),h=d3.svg.axis().scale(l).orient("bottom");h.tickSize(-n+t.top+t.bottom,0),h.tickSubdivide(!0);var p=d3.svg.axis().scale(c).orient("left"),d=d3.scale.category10(),v=e.LegendBox().nameAccessor(o),m=d3.dispatch("showTooltip","hideTooltip","pointMouseover","pointMouseout");return g.dispatch=m,g.margin=function(e){return arguments.length?(t=e,g):t},g.width=function(e){return arguments.length?(r=e,g):r},g.height=function(e){return arguments.length?(n=e,g):n},g.value=function(e){return arguments.length?(value=e,g):value},g.label=function(e){return arguments.length?(label=e,g):label},g.title=function(e){return arguments.length?(u=e,g):u},g.xAxis=function(e){return arguments.length?(h=e,g):h},g.yAxis=function(e){return arguments.length?(p=e,g):p},g.yAxisTitle=function(e){return arguments.length?(a=e,g):a},g.duration=function(e){return arguments.length?(f=e,g):f},g.legend=function(e){return arguments.length?(v=e,g):v},g.xValue=function(e){return arguments.length?(i=e,g):i},g.yValue=function(e){return arguments.length?(s=e,g):s},g.nameValue=function(e){return arguments.length?(o=e,g):o},g.colors=function(e){return arguments.length?(d=e,g):d},g},e.StackedChart=function(){function S(e){return c(i(e))}function x(e){return h(e.y0)}function T(e){return h(e.y0+e.y)}function N(e){e.each(function(u){var l=this;data=u.filter(function(e){return!e.disabled}),data=d3.layout.stack().offset(a).order(f).values(function(e){return e.values}).x(i).y(s)(data),c.range([0,r-t.left-t.right]);var x=data.map(function(e){return d3.max(e.values,function(e){return i(e)})}),C=data.map(function(e){return d3.min(e.values,function(e){return i(e)})});c.domain([d3.min(C),d3.max(x)]),h.range([n-t.top-t.bottom,0]);var k=data.map(function(e){return d3.max(e.values,function(e){return e.y+e.y0})});h.domain([0,d3.max(k)]);var L=d3.select(this).selectAll("svg").data([data]),A=L.enter().append("svg").append("g");A.append("g").attr("class","areas"),A.append("g").attr("class","points"),A.append("g").attr("class","x axis"),A.append("g").attr("class","y axis").append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".72em").attr("class","y axis label").attr("text-anchor","middle"),A.append("svg:text").attr("class","chartTitle label").attr("text-anchor","middle").attr("dy","1em").attr("transform","translate("+(r-t.left-t.right+20)/2+","+ -t.top+")"),A.append("g").attr("class","legend").attr("transform","translate("+(r-t.left-t.right+20)+","+0+")").style("font-size","12px"),L.attr("width",r).attr("height",n);var O=L.select("g").attr("transform","translate("+t.left+","+t.top+")"),M=O.select(".areas").selectAll(".area").data(function(e){return e},function(e){return o(e)}).classed("hover",function(e){return e.hover}),_=M.enter();_.append("path").attr("class","area").attr("fill",function(e,t){return p(o(e))}).attr("opacity",0).attr("d",function(e){return m(e.values)}),M.exit().remove();var D=O.select(".points").selectAll("g.seriespoints").data(function(e){return e});D.exit().transition().duration(b).style("r",0).style("opacity",1e-6).remove();var P=D.enter(),H=P.append("g").attr("class","seriespoints").selectAll("g.circle").data(function(e){return e.values.forEach(function(t){t.name=o(e)}),e.values});D.selectAll("g.circle").data(function(e){return e.values.forEach(function(t){t.name=o(e)}),e.values});var B=H.enter().append("g").attr("class","circle");B.append("circle").attr("opacity",.1).attr("class","seriespoint").attr("r",0).attr("cx",function(e){return S(e)}).attr("cy",function(e){return T(e)}).on("mouseover",function(e,t,n){E.pointMouseover({x:i(e),y:s(e),series:e.name,pos:[c(i(e)),h(e.y0+e.y)],pointIndex:t,seriesIndex:n})}).on("mouseout",function(e){E.pointMouseout({})}),O.selectAll("path.area").attr("fill",function(e,t){return p(o(e))}).transition().duration(b).attr("opacity",.9).attr("d",function(e){return m(e.values)}),O.selectAll("g.circle").select("circle").transition().duration(b).attr("r",5).attr("cx",function(e){return S(e)}).attr("cy",function(e){return T(e)}),O.select("text.chartTitle").text(g),O.select(".x.axis").attr("transform","translate(0,"+h.range()[0]+")").call(d),O.select(".y.axis").transition().duration(b).attr("transform","translate(-25,0)").call(v),O.select(".y.axis.label").attr("y",-45).attr("x",(-n+t.top+t.bottom)/2).attr("dy",".1em").text(y),w.numData()!=u.length&&O.select(".legend").datum(data).call(w),w.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,data.filter(function(e){return!e.disabled}).length||data.forEach(function(e){e.disabled=!1}),e.call(N)}),w.dispatch.on("legendMouseover",function(t,n){t.hover=!0,e.call(N)}),w.dispatch.on("legendMouseout",function(t,n){t.hover=!1,e.call(N)}),E.on("pointMouseover.tooltip",function(e){var n=$(l).offset(),r=e.pos[0]+n.left+t.left,i=e.pos[1]+n.top+t.top,s=d3.time.format("%Y-%m-%d");formatterY=d3.format(".02f");var o="<h3>"+e.series+"</h3>"+"<p>"+'<span class="value">['+s(e.x)+", "+formatterY(e.y)+"]</span>"+"</p>";nvtooltip.show([r,i],o)}),E.on("pointMouseout.tooltip",function(e){nvtooltip.cleanup()})})}var t={top:50,bottom:30,left:100,right:100},n=400,r=1e3,i=function(e){return e.x},s=function(e){return e.y},o=function(e){return e.name},u="stack",a="zero",f="default",l="linear",c=d3.time.scale.utc().nice(),h=d3.scale.linear().nice(),p=d3.scale.category10(),d=d3.svg.axis().scale(c).orient("bottom"),v=d3.svg.axis().scale(h).orient("left");d.tickSize(-n+t.top+t.bottom,0),d.tickSubdivide(!0);var m=d3.svg.area().interpolate(l).x(S).y0(x).y1(T),g="Chart Title",y="Axis Title",b=1e3,w=e.LegendBox().nameAccessor(function(e){return e.name}),E=d3.dispatch("showTooltip","hideTooltip","pointMouseover","pointMouseout");return N.dispatch=E,N.margin=function(e){return arguments.length?(t=e,N):t},N.width=function(e){return arguments.length?(r=e,N):r},N.height=function(e){return arguments.length?(n=e,N):n},N.value=function(e){return arguments.length?(value=e,N):value},N.label=function(e){return arguments.length?(label=e,N):label},N.title=function(e){return arguments.length?(g=e,N):g},N.xAxis=function(e){return arguments.length?(d=e,N):d},N.yAxis=function(e){return arguments.length?(v=e,N):v},N.yAxisTitle=function(e){return arguments.length?(y=e,N):y},N.duration=function(e){return arguments.length?(b=e,N):b},N.legend=function(e){return arguments.length?(w=e,N):w},N.xValue=function(e){return arguments.length?(i=e,N):i},N.yValue=function(e){return arguments.length?(s=e,N):s},N.nameValue=function(e){return arguments.length?(o=e,N):o},N.colors=function(e){return arguments.length?(p=e,N):p},N};var e=window.Bridle||{};e.Table=function(){function o(a){a.each(function(a){function w(e){return a.headers.indexOf(e)}var c=this;if(typeof i=="undefined"||i.rows.length!=a.rows.length)i=$.extend(!0,{},a);s==1&&n==""&&(s=!1,a=i),n!=""&&(a.rows=u(a.rows,function(e,t){return f(e[w(n)],t[w(n)])}));var h=d3.select(c).selectAll("table").data([a]),p=h.enter().append("table").attr("class","table table-hover bridle").attr("style","margin-top: "+t.top+"px; margin-bottom: "+t.bottom+"px; margin-left: "+t.left+"px; margin-right: "+t.top+"px"),d=p.append("thead").append("tr"),v=p.append("tbody"),m=h.select("thead").select("tr").selectAll("th").data(function(e){return e.headers}),g=m.enter().append("th"),y=h.select("tbody").selectAll("tr").data(function(e){return e.rows});rowsEnter=y.enter().append("tr"),y.exit().remove();var b=y.selectAll("td").data(function(e){return e});b.enter().append("td"),h.selectAll("th").style("text-align",function(e){return l(e)?"right":"left"}).html(function(e){return e}).on("click",function(e,t){s==1?d3.select(c).call(o.sortBy("")):(t==w(n)?(r=!r,s=!0):s=!1,d3.select(c).call(o.sortBy(e)))}).each(function(e,t){t==w(n)&&(r?d3.select(this).append("span").attr("class","desc"):d3.select(this).append("span").attr("class","asc"))}),h.selectAll("td").style("text-align",function(e){return l(e)?"left":"left"}).text(function(t){if(l(t)){var n=e(t);return n}return t})})}function u(e,t){if(e.length<2)return e;var n=Math.ceil(e.length/2);return a(u(e.slice(0,n),t),u(e.slice(n),t),t)}function a(e,t,n){var r=new Array;while(e.length>0&&t.length>0)n(e[0],t[0])<=0?r.push(e.shift()):r.push(t.shift());while(e.length>0)r.push(e.shift());while(t.length>0)r.push(t.shift());return r}function f(e,t){return e===null||t===null?0:(typeof e=="string"&&typeof t=="string"&&(e=e.toLowerCase(),t=t.toLowerCase()),r===!0?e>t?-1:e==t?0:1:e>t?1:e==t?0:-1)}function l(e){return!isNaN(parseFloat(e))&&isFinite(e)}var e=d3.format(".3f"),t={top:0,bottom:0,left:0,right:0},n="",r=!1,i,s=!1;return o.margin=function(e){return arguments.length?(t=e,o):t},o.numFormat=function(t){return arguments.length?(e=t,o):e},o.sortBy=function(e){return arguments.length?(n=e,o):n},o.sortDesc=function(e){return arguments.length?(r=e,o):r},o}})();